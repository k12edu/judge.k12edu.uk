(function(){"use strict";var e={2135:function(e,t,a){var o=a(5130),n=a(6768);const i={class:"v-container",style:{"max-width":"100vw"}},s={class:"menu-container",style:{height:"100px"}},l={class:"menu"};function r(e,t,a,o,r,c){const u=(0,n.g2)("router-link"),d=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("div",s,[(0,n.bF)(u,{style:{width:"120px"},to:"/",class:"menu-item"},{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.eW)("OnlineJudge")]))),_:1}),(0,n.Lk)("nav",l,[(0,n.bF)(u,{to:"/announcement",class:"menu-item"},{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)("公告")]))),_:1}),(0,n.bF)(u,{to:"/problem_list",class:"menu-item"},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)("題目")]))),_:1}),(0,n.bF)(u,{to:"/forum",class:"menu-item"},{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.eW)("討論區")]))),_:1}),(0,n.bF)(u,{to:"/rank",class:"menu-item"},{default:(0,n.k6)((()=>t[5]||(t[5]=[(0,n.eW)("排行榜")]))),_:1})]),r.isLogin?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,style:{width:"150px"},id:"google-signin-button",onClick:t[0]||(t[0]=(...t)=>e.googleLogin&&e.googleLogin(...t))})),r.isLogin?((0,n.uX)(),(0,n.Wv)(u,{key:1,style:{width:"150px"},to:{path:"/profile",query:{id:0}},class:"menu-item"},{default:(0,n.k6)((()=>t[6]||(t[6]=[(0,n.eW)("個人資料")]))),_:1})):(0,n.Q3)("",!0)]),(0,n.bF)(d),t[7]||(t[7]=(0,n.Lk)("footer",{class:"footer"},[(0,n.Lk)("div",{class:"footer-container"},[(0,n.Lk)("div",null,[(0,n.Lk)("p",null,"© 2025 Your Company. All Rights Reserved.")])])],-1))])}a(4114);var c=a(144),u={data(){return{isLogin:!1,googleClientId:"917774825923-ki9dogspvhie7m0pfblhsec1mfa5guvi.apps.googleusercontent.com",access_token:"",api_url:"",r_url:""}},provide(){return{isLogin:(0,c.lW)(this,"isLogin"),access_token:(0,c.lW)(this,"access_token"),api_url:(0,c.lW)(this,"api_url"),logout:this.logout,getTokenFromCookie:this.getTokenFromCookie}},mounted(){const e=window.location.hostname;console.log(e),"localhost"==e?(this.api_url="http://127.0.0.1:60000",this.r_url="http://localhost:8080/",console.log("test1")):(this.api_url="https://api.k12edu.uk",this.r_url="https://teacher.k12edu.uk/",console.log("test2")),this.loadGoogleScript(),null===localStorage.getItem("jwt")&&this.getTokenFromCookie(),0==this.checkAndRefreshToken()?this.isLogin=!1:this.isLogin=!0},methods:{async getTokenFromCookie(){try{const e=await fetch(`${this.api_url}/accounts/api/get_token_from_cookie/`,{method:"GET",credentials:"include"}),t=await e.json();e.ok?(console.log("已登入:",t.token),this.isLogin=!0,this.access_token=t.token):console.warn("未登入:",t.message)}catch(e){console.error("請求失敗:",e)}},logout(){document.cookie="access=; path=/; domain=.k12edu.uk; expires=Thu, 01 Jan 1970 00:00:00 GMT",console.log("Current cookies:",document.cookie),this.access_token="",this.isLogin=!1,this.$router.push({name:"home"})},loadGoogleScript(){const e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=this.initializeGoogleSignIn,document.head.appendChild(e)},initializeGoogleSignIn(){"undefined"!==typeof window.google?(window.google.accounts.id.initialize({client_id:this.googleClientId,scope:"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",callback:this.handleCredentialResponse}),window.google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:"outline",size:"large"})):console.error("Google API 未正確加載")},handleCredentialResponse(e){console.log("Google Sign-In Credential Response:",e);const t=e.credential;this.sendIdTokenToBackend(t)},sendIdTokenToBackend(e){fetch(`${this.api_url}/accounts/api/google-login2/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_token:e}),credentials:"include"}).then((e=>e.json())).then((e=>{e.access?(console.log("JWT token received and stored in cookie:",e),this.isLogin=!0,this.getTokenFromCookie()):console.error("JWT not received:",e)})).catch((e=>console.error("Error sending id_token to backend:",e)))}}},d=a(1241);const h=(0,d.A)(u,[["render",r],["__scopeId","data-v-240f3926"]]);var p=h,g=a(1387),m=a(4232);const k={class:"main-content",style:{"min-height":"100vh"}},v={class:"announcement-section"},_={key:0,class:"announcement-list"},b={key:1,class:"no-announcements"};function f(e,t,a,o,i,s){return(0,n.uX)(),(0,n.CE)("div",k,[(0,n.Lk)("div",v,[t[1]||(t[1]=(0,n.Lk)("h2",null,"最新公告",-1)),i.announcements.length?((0,n.uX)(),(0,n.CE)("div",_,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.announcements,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"announcement-card"},[(0,n.Lk)("h3",null,(0,m.v_)(e.title),1),(0,n.Lk)("p",null,(0,m.v_)(e.announcement_description),1)])))),128))])):((0,n.uX)(),(0,n.CE)("div",b,t[0]||(t[0]=[(0,n.Lk)("p",null,"目前沒有公告",-1)])))]),t[2]||(t[2]=(0,n.Fv)('<div class="site-intro-section" data-v-9516cd60><h3 data-v-9516cd60>關於網站</h3><p data-v-9516cd60> 歡迎來到Online Judge! 此網站提供使用者進行程式題目練習，立即開始您的題目練習並累積經驗! </p><div class="features" data-v-9516cd60><div class="feature" data-v-9516cd60><h4 data-v-9516cd60>程式語言</h4><p data-v-9516cd60>支援Python、Java、C、C++四種語言。</p></div><div class="feature" data-v-9516cd60><h4 data-v-9516cd60>學習範圍</h4><p data-v-9516cd60>題目範圍包括基礎程式功能、資料結構與演算法。</p></div><div class="feature" data-v-9516cd60><h4 data-v-9516cd60>&quot;遊戲名稱&quot;</h4><p data-v-9516cd60>結合遊戲提高學習動力。</p></div></div></div>',1))])}a(4603),a(7566),a(8721);var y={name:"MainBody",components:{},data(){return{bodyTitle:"Home Page",announcements:[]}},props:{},inject:["api_url","access_token"],methods:{async fetchAnnouncements(){try{const e={page:1,per_page:3},t=new URLSearchParams(e),a=await fetch(`${this.api_url}/onlinejudge/api/announcement/list?${t.toString()}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.access_token}`}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const o=await a.json();this.announcements=o.announcements}catch(e){console.error("取得公告時發生錯誤：",e)}}},mounted(){this.fetchAnnouncements()}};const L=(0,d.A)(y,[["render",f],["__scopeId","data-v-9516cd60"]]);var C=L;const P={class:"announcement-page"},E={class:"back-div"},w={class:"items-per-page"},T={key:0,class:"announcement-list"},$={key:1,class:"no-announcements"},I={class:"pagination"},X=["onClick"];function j(e,t,a,i,s,l){return(0,n.uX)(),(0,n.CE)("div",P,[(0,n.Lk)("div",E,[(0,n.Lk)("p",{class:"back-button",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))},"返回上一頁")]),t[5]||(t[5]=(0,n.Lk)("h1",null,"公告",-1)),(0,n.Lk)("div",w,[t[3]||(t[3]=(0,n.Lk)("label",{for:"perPage"},"每頁顯示數量:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",id:"perPage","onUpdate:modelValue":t[1]||(t[1]=e=>s.pageSize=e),min:"1",onInput:t[2]||(t[2]=(...e)=>l.changeItemPerPage&&l.changeItemPerPage(...e)),placeholder:"輸入數字"},null,544),[[o.Jo,s.pageSize]])]),s.announcements.length?((0,n.uX)(),(0,n.CE)("div",T,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.announcements,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"announcement-card"},[(0,n.Lk)("h3",null,(0,m.v_)(e.title),1),(0,n.Lk)("p",null,(0,m.v_)(e.announcement_description),1)])))),128))])):((0,n.uX)(),(0,n.CE)("div",$,t[4]||(t[4]=[(0,n.Lk)("p",null,"目前沒有公告",-1)]))),(0,n.Lk)("div",I,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.displayedPages,(e=>((0,n.uX)(),(0,n.CE)("button",{onClick:t=>l.changePage(e),class:(0,m.C4)(["btn",{active:s.currentPage===e}]),key:e},(0,m.v_)(e),11,X)))),128))])])}var A={data(){return{announcements:[],currentPage:1,pageSize:5,total_page:0}},computed:{displayedPages(){const e=10;let t=Math.max(1,this.currentPage-Math.floor(e/2)),a=Math.min(this.totalPages,t+e-1);a-t+1<e&&(t=Math.max(1,a-e+1));let o=[];for(let n=t;n<=a;n++)o.push(n);return o},totalPages(){return this.total_page}},inject:["api_url","access_token"],methods:{goBack(){this.$router.go(-1)},changeItemPerPage(){this.total_page=0,this.changePage(1)},async fetchAnnouncements(){try{const e={page:this.currentPage,per_page:this.pageSize},t=new URLSearchParams(e),a=await fetch(`${this.api_url}/onlinejudge/api/announcement/list?${t.toString()}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.access_token}`}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const o=await a.json();this.total_page!=o.total_page&&(this.total_page=o.total_page),this.announcements=o.announcements}catch(e){console.error("取得公告時發生錯誤：",e)}},changePage(e){this.currentPage=e,this.fetchAnnouncements()}},mounted(){this.total_page=0,this.fetchAnnouncements()}};const x=(0,d.A)(A,[["render",j],["__scopeId","data-v-015bb670"]]);var B=x;const S={class:"problem-list-container",style:{"min-height":"100vh"}},z={class:"back-div"},F={class:"items-per-page"},M={class:"tag-filter"},q={class:"tags"},U=["value"],D={class:"tag-text"},J={key:0,class:"loading"},O={key:1,class:"p-list"},R={class:"problem-grid"},G=["onClick"],K={class:"problem-number"},H={class:"problem-title"},Q={class:"problem-difficulty"},V={class:"problem-status"},W={class:"pagination"},N=["onClick"];function Y(e,t,a,i,s,l){return(0,n.uX)(),(0,n.CE)("div",S,[(0,n.Lk)("div",z,[(0,n.Lk)("p",{class:"back-button",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))},"返回上一頁")]),t[7]||(t[7]=(0,n.Lk)("h1",null,"題目列表",-1)),(0,n.Lk)("div",F,[t[5]||(t[5]=(0,n.Lk)("label",{for:"perPage"},"每頁顯示數量:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",id:"perPage","onUpdate:modelValue":t[1]||(t[1]=e=>s.per_page=e),min:"1",onInput:t[2]||(t[2]=(...e)=>l.changeItemPerPage&&l.changeItemPerPage(...e)),placeholder:"輸入每頁顯示的資料筆數"},null,544),[[o.Jo,s.per_page]])]),(0,n.Lk)("div",M,[t[6]||(t[6]=(0,n.Lk)("label",{for:"tags",style:{"margin-bottom":"20px"}},"選擇標籤:",-1)),(0,n.Lk)("div",q,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.tags,(e=>((0,n.uX)(),(0,n.CE)("label",{key:e,class:"tag-option"},[(0,n.bo)((0,n.Lk)("input",{type:"checkbox",value:e,"onUpdate:modelValue":t[3]||(t[3]=e=>s.selectedTags=e),class:"checkbox-input",onChange:t[4]||(t[4]=(...e)=>l.fetchProblems&&l.fetchProblems(...e))},null,40,U),[[o.lH,s.selectedTags]]),(0,n.Lk)("span",D,(0,m.v_)(e),1)])))),128))])]),s.loading?((0,n.uX)(),(0,n.CE)("div",J,"載入中...")):((0,n.uX)(),(0,n.CE)("div",O,[(0,n.Lk)("div",R,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.problems,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.problem_id,class:"problem-item",onClick:t=>l.goToProblem(e.problem_id)},[(0,n.Lk)("div",K,"#"+(0,m.v_)(e.problem_id),1),(0,n.Lk)("div",H,(0,m.v_)(e.title),1),(0,n.Lk)("div",Q,(0,m.v_)(e.difficulty),1),(0,n.Lk)("div",V,[(0,n.Lk)("span",{class:(0,m.C4)({completed:e.is_solved,"not-completed":!e.is_solved})},(0,m.v_)(e.is_solved?"已完成":"未完成"),3)])],8,G)))),128))])])),(0,n.Lk)("div",W,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.displayedPages,(e=>((0,n.uX)(),(0,n.CE)("button",{onClick:t=>l.changePage(e),class:(0,m.C4)(["btn",{active:s.currentPage===e}]),key:e},(0,m.v_)(e),11,N)))),128))])])}var Z={data(){return{problems:[],tags:[],selectedTags:[],loading:!1,currentPage:1,total_page:0,per_page:10}},computed:{displayedPages(){const e=10;let t=Math.max(1,this.currentPage-Math.floor(e/2)),a=Math.min(this.totalPages,t+e-1);a-t+1<e&&(t=Math.max(1,a-e+1));let o=[];for(let n=t;n<=a;n++)o.push(n);return o},totalPages(){return this.total_page}},inject:["api_url","access_token"],methods:{goBack(){this.$router.go(-1)},changeItemPerPage(){this.total_page=0,this.changePage(1)},goToProblem(e){this.$router.push({path:"/problem",query:{problemId:e}})},changePage(e){this.currentPage=e,this.fetchProblems()},async fetchProblems(){this.loading=!0;try{let e="";if(this.selectedTags.length>0){e=this.selectedTags[0];for(let t=1;t<this.selectedTags.length;t++)e+=`,${this.selectedTags[t]}`}else e=null;const t={page:this.currentPage,per_page:this.per_page,query_tag:e},a=new URLSearchParams(t),o=await fetch(`${this.api_url}/onlinejudge/api/problem/list?${a.toString()}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.access_token}`}}),n=await o.json();this.total_page!=n.total_page&&(this.total_page=n.total_page),this.problems=n.problems}catch(e){console.error("獲取題目資料錯誤:",e)}finally{this.loading=!1}},async fetchTags(){this.loading=!0;try{const e={},t=new URLSearchParams(e),a=await fetch(`${this.api_url}/onlinejudge/api/tags/list?${t.toString()}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.access_token}`}}),o=await a.json();this.tags=o.tags}catch(e){console.error("獲取tag資料錯誤:",e)}}},mounted(){0==this.tags.length&&this.fetchTags(),this.fetchProblems()}};const ee=(0,d.A)(Z,[["render",Y],["__scopeId","data-v-514d3716"]]);var te=ee;const ae={class:"problem-list-container",style:{"min-height":"100vh"}},oe={class:"back-div"},ne={class:"items-per-page"},ie={key:0,class:"loading"},se={key:1},le={class:"problem-grid"},re=["onClick"],ce={class:"problem-number"},ue={class:"problem-title"},de={class:"problem-difficulty"},he={class:"pagination"},pe=["onClick"];function ge(e,t,a,i,s,l){return(0,n.uX)(),(0,n.CE)("div",ae,[(0,n.Lk)("div",oe,[(0,n.Lk)("p",{class:"back-button",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))},"返回上一頁")]),t[4]||(t[4]=(0,n.Lk)("h1",null,"討論區",-1)),(0,n.Lk)("div",ne,[t[3]||(t[3]=(0,n.Lk)("label",{for:"perPage"},"每頁顯示數量:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",id:"perPage","onUpdate:modelValue":t[1]||(t[1]=e=>s.per_page=e),min:"1",onInput:t[2]||(t[2]=(...e)=>l.changeItemPerPage&&l.changeItemPerPage(...e)),placeholder:"輸入每頁顯示的資料筆數"},null,544),[[o.Jo,s.per_page]])]),s.loading?((0,n.uX)(),(0,n.CE)("div",ie,"載入中...")):((0,n.uX)(),(0,n.CE)("div",se,[(0,n.Lk)("div",le,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.articles,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"problem-item",onClick:t=>l.goToArticle(e.id)},[(0,n.Lk)("div",ce,"題目: "+(0,m.v_)(e.problem_title),1),(0,n.Lk)("div",ue,"主題: "+(0,m.v_)(e.title),1),(0,n.Lk)("div",de,"留言數: "+(0,m.v_)(e.comment_count),1)],8,re)))),128))])])),(0,n.Lk)("div",he,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.displayedPages,(e=>((0,n.uX)(),(0,n.CE)("button",{onClick:t=>l.changePage(e),class:(0,m.C4)(["btn",{active:s.currentPage===e}]),key:e},(0,m.v_)(e),11,pe)))),128))])])}var me={data(){return{articles:[],loading:!1,currentPage:1,total_page:0,per_page:10}},computed:{displayedPages(){const e=10;let t=Math.max(1,this.currentPage-Math.floor(e/2)),a=Math.min(this.totalPages,t+e-1);a-t+1<e&&(t=Math.max(1,a-e+1));let o=[];for(let n=t;n<=a;n++)o.push(n);return o},totalPages(){return this.total_page}},inject:["api_url","access_token"],methods:{goBack(){this.$router.go(-1)},changeItemPerPage(){this.total_page=0,this.changePage(1)},goToArticle(e){this.$router.push({path:"/forum/disscussion",query:{articleId:e}})},changePage(e){this.currentPage=e,this.fetchArticles()},async fetchArticles(){this.loading=!0;try{const e={page:this.currentPage,per_page:this.per_page},t=new URLSearchParams(e),a=await fetch(`${this.api_url}/onlinejudge/articles?${t.toString()}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.access_token}`}}),o=await a.json();this.total_page!=o.total_page&&(this.total_page=o.total_page),this.articles=o.articles}catch(e){console.error("獲取題目資料錯誤:",e)}finally{this.loading=!1}}},mounted(){this.fetchArticles()}};const ke=(0,d.A)(me,[["render",ge],["__scopeId","data-v-14b357d4"]]);var ve=ke;const _e={class:"rank-board-page",style:{"min-height":"100vh"}},be={class:"back-div"},fe={class:"items-per-page"},ye={key:0},Le={class:"rank-grid"},Ce={class:"rank_data"},Pe=["onClick"],Ee={class:"rank_data"},we={key:1},Te={class:"pagination"},$e=["onClick"];function Ie(e,t,a,i,s,l){return(0,n.uX)(),(0,n.CE)("div",_e,[(0,n.Lk)("div",be,[(0,n.Lk)("p",{class:"back-button",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))},"返回上一頁")]),t[6]||(t[6]=(0,n.Lk)("h1",null,"排行榜",-1)),(0,n.Lk)("div",fe,[t[3]||(t[3]=(0,n.Lk)("label",{for:"perPage"},"每頁顯示數量:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",id:"perPage","onUpdate:modelValue":t[1]||(t[1]=e=>s.pageSize=e),min:"1",onInput:t[2]||(t[2]=(...e)=>l.changeItemPerPage&&l.changeItemPerPage(...e)),placeholder:"輸入每頁顯示的資料筆數"},null,544),[[o.Jo,s.pageSize]])]),s.rankings.length?((0,n.uX)(),(0,n.CE)("div",ye,[(0,n.Lk)("div",Le,[t[4]||(t[4]=(0,n.Lk)("div",{class:"rank-grid-header"},[(0,n.Lk)("p",null,"排名"),(0,n.Lk)("p",null,"用戶名稱"),(0,n.Lk)("p",null,"解題數量")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.rankings,(e=>((0,n.uX)(),(0,n.CE)("div",{class:"rank-grid-item",key:e.id},[(0,n.Lk)("p",Ce,(0,m.v_)(e.rank),1),(0,n.Lk)("p",{class:"rank_data link",onClick:t=>l.goToProfile(e.id)},(0,m.v_)(e.user_name),9,Pe),(0,n.Lk)("p",Ee,(0,m.v_)(e.num_of_solved_program_problem),1)])))),128))])])):((0,n.uX)(),(0,n.CE)("div",we,t[5]||(t[5]=[(0,n.Lk)("p",null,"目前沒有排名資料。",-1)]))),(0,n.Lk)("div",Te,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.displayedPages,(e=>((0,n.uX)(),(0,n.CE)("button",{onClick:t=>l.changePage(e),class:(0,m.C4)(["btn",{active:s.currentPage===e}]),key:e},(0,m.v_)(e),11,$e)))),128))])])}var Xe={data(){return{rankings:[],currentPage:1,pageSize:5,total_pages:0,self_data:{}}},computed:{displayedPages(){const e=10;let t=Math.max(1,this.currentPage-Math.floor(e/2)),a=Math.min(this.totalPages,t+e-1);a-t+1<e&&(t=Math.max(1,a-e+1));let o=[];for(let n=t;n<=a;n++)o.push(n);return o},totalPages(){return this.total_pages}},inject:["api_url","access_token"],methods:{goBack(){this.$router.go(-1)},goToProfile(e){this.$router.push({path:"/profile",query:{id:e}})},changeItemPerPage(){this.total_pages=0,this.changePage(1)},async fetchRankings(){try{const e={suject:"program",page:this.currentPage,num:this.pageSize},t=new URLSearchParams(e),a=await fetch(`${this.api_url}/onlinejudge/api/rank?${t.toString()}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.access_token}`}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const o=await a.json();this.total_pages!=o.total_pages&&(this.total_pages=o.total_pages),this.self_data=o.self_data,this.rankings=o.data}catch(e){console.error("取得排行榜時發生錯誤：",e)}},changePage(e){this.currentPage=e,this.fetchRankings()}},mounted(){this.total_pages=0,this.fetchRankings()}};const je=(0,d.A)(Xe,[["render",Ie],["__scopeId","data-v-71de35c0"]]);var Ae=je;const xe={class:"profile-container"},Be={class:"top-bar"},Se={key:0},ze={key:1,class:"error-message"},Fe={key:2},Me={class:"profile-field"},qe={class:"profile-field"},Ue={class:"profile-field"},De={class:"profile-field"},Je={class:"profile-field"},Oe={class:"profile-field"},Re={class:"profile-field"},Ge={key:3,class:"top-bar"};function Ke(e,t,a,o,i,s){return(0,n.uX)(),(0,n.CE)("div",xe,[(0,n.Lk)("div",Be,[(0,n.Lk)("p",{class:"back-button",onClick:t[0]||(t[0]=(...e)=>s.goBack&&s.goBack(...e))},"返回上一頁"),0==this.$route.query.id&&s.isLogin?((0,n.uX)(),(0,n.CE)("p",{key:0,class:"logout-button",onClick:t[1]||(t[1]=(...e)=>s.handleLogout&&s.handleLogout(...e))},"登出")):(0,n.Q3)("",!0)]),t[10]||(t[10]=(0,n.Lk)("h1",null,"個人檔案",-1)),i.loading?((0,n.uX)(),(0,n.CE)("div",Se,"載入中...")):i.error?((0,n.uX)(),(0,n.CE)("div",ze,(0,m.v_)(i.error),1)):((0,n.uX)(),(0,n.CE)("div",Fe,[(0,n.Lk)("div",Me,[t[3]||(t[3]=(0,n.Lk)("label",null,"ID：",-1)),(0,n.Lk)("span",null,(0,m.v_)(i.profileData.id),1)]),(0,n.Lk)("div",qe,[t[4]||(t[4]=(0,n.Lk)("label",null,"使用者名稱：",-1)),(0,n.Lk)("span",null,(0,m.v_)(i.profileData.user_name),1)]),(0,n.Lk)("div",Ue,[t[5]||(t[5]=(0,n.Lk)("label",null,"Email：",-1)),(0,n.Lk)("span",null,(0,m.v_)(i.profileData.email),1)]),(0,n.Lk)("div",De,[t[6]||(t[6]=(0,n.Lk)("label",null,"已解程式題數：",-1)),(0,n.Lk)("span",null,(0,m.v_)(i.profileData.num_of_solved_program_problem),1)]),(0,n.Lk)("div",Je,[t[7]||(t[7]=(0,n.Lk)("label",null,"已解自然題數：",-1)),(0,n.Lk)("span",null,(0,m.v_)(i.profileData.num_of_solved_natural_problem),1)]),(0,n.Lk)("div",Oe,[t[8]||(t[8]=(0,n.Lk)("label",null,"已解數學題數：",-1)),(0,n.Lk)("span",null,(0,m.v_)(i.profileData.num_of_solved_math_problem),1)]),(0,n.Lk)("div",Re,[t[9]||(t[9]=(0,n.Lk)("label",null,"註冊時間：",-1)),(0,n.Lk)("span",null,(0,m.v_)(s.formatDate(i.profileData.create_time)),1)])])),0==this.$route.query.id?((0,n.uX)(),(0,n.CE)("div",Ge,[s.isLogin?((0,n.uX)(),(0,n.CE)("p",{key:0,class:"logout-button",onClick:t[2]||(t[2]=(...e)=>s.goToHistory&&s.goToHistory(...e))},"提交紀錄")):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)])}var He={name:"UserProfile",data(){return{profileData:{},loading:!0,error:null}},inject:["api_url","access_token","logout","isLogin"],methods:{goBack(){this.$router.go(-1)},goToHistory(){this.$router.push({path:"/submission-history"})},async fetchProfileData(){try{const e=this.$route.query.id,t=await fetch(`${this.api_url}/onlinejudge/api/user/${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.access_token}`}});if(!t.ok)throw new Error("無法獲取個人資料");const a=await t.json();this.profileData=a}catch(e){this.error="無法取得個人資料，請稍後再試",console.error(e)}finally{this.loading=!1}},formatDate(e){if(!e)return"無日期資訊";const t=new Date(e);return t.toLocaleDateString()},handleLogout(){this.logout()}},mounted(){this.fetchProfileData()}};const Qe=(0,d.A)(He,[["render",Ke],["__scopeId","data-v-683f0fdf"]]);var Ve=Qe;const We={id:"main-body"};function Ne(e,t,a,o,i,s){return(0,n.uX)(),(0,n.CE)("div",We)}var Ye={name:"LoginPage",components:{},data(){return{bodyTitle:"Home Page"}},props:{}};const Ze=(0,d.A)(Ye,[["render",Ne],["__scopeId","data-v-d2f63eb6"]]);var et=Ze;const tt={class:"v-container",style:{"min-height":"100vh",width:"60%",gap:"20px"}},at={class:"back-div"},ot={key:0,class:"h-container"},nt={class:"problem-description"},it={key:0},st={key:1,class:"error-message"},lt={key:2,class:"description-content"},rt={key:1,class:"v-container"},ct={class:"h-container"},ut={ref:"editorContainer",class:"codemirror-container"};function dt(e,t,a,i,s,l){return(0,n.uX)(),(0,n.CE)("div",tt,[(0,n.Lk)("div",at,[(0,n.Lk)("p",{class:"back-button",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))},"返回上一頁")]),s.problem?((0,n.uX)(),(0,n.CE)("div",ot,[(0,n.Lk)("h1",null,(0,m.v_)(s.problem.title),1)])):(0,n.Q3)("",!0),(0,n.Lk)("div",nt,[t[5]||(t[5]=(0,n.Lk)("h2",null,"題目敘述",-1)),s.loading?((0,n.uX)(),(0,n.CE)("div",it,"載入中...")):s.error?((0,n.uX)(),(0,n.CE)("div",st,(0,m.v_)(s.error),1)):((0,n.uX)(),(0,n.CE)("div",lt,(0,m.v_)(s.description),1))]),s.problem?((0,n.uX)(),(0,n.CE)("div",rt,[(0,n.Lk)("p",null,"標籤: "+(0,m.v_)(l.getTag),1)])):(0,n.Q3)("",!0),(0,n.Lk)("div",ct,[(0,n.Lk)("button",{style:{margin:"0px 10px"},onClick:t[1]||(t[1]=(...e)=>l.submitCode&&l.submitCode(...e)),class:"btn"},"提交"),(0,n.Lk)("button",{style:{margin:"0px 10px"},onClick:t[2]||(t[2]=(...e)=>l.gotoArticleList&&l.gotoArticleList(...e)),class:"btn"},"討論區")]),(0,n.bo)((0,n.Lk)("select",{class:"l-select","onUpdate:modelValue":t[3]||(t[3]=e=>s.language=e),onChange:t[4]||(t[4]=(...e)=>l.changeLanguage&&l.changeLanguage(...e))},t[6]||(t[6]=[(0,n.Lk)("option",{value:"java"},"Java",-1),(0,n.Lk)("option",{value:"python"},"Python",-1),(0,n.Lk)("option",{value:"c"},"C",-1),(0,n.Lk)("option",{value:"cpp"},"C++",-1)]),544),[[o.u1,s.language]]),(0,n.Lk)("div",ut,null,512)])}var ht=a(8814),pt=a(3672),gt=a(8954),mt=a(5229),kt=a(5033),vt=a(8530),_t=a(866),bt={name:"CodeEditor",data(){return{request_time:0,problem:null,description:"",loading:!0,error:null,editor:null,language:"python",codeContent:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"}},props:{},computed:{problemId(){return this.$route.query.problemId||""},getTag(){if(0==this.problem.tag.length)return"";let e=this.problem.tag[0];for(let t=1;t<this.problem.tag.length;t++)e+=","+this.problem.tag[t];return e}},inject:["api_url","access_token","getTokenFromCookie"],methods:{goBack(){this.$router.go(-1)},gotoArticleList(){this.$router.push({path:"/problem_article_list",query:{problemId:this.$route.query.problemId}})},async fetchDescription(){await new Promise((e=>setTimeout(e,1e3)));try{const e={id:this.problemId},t=new URLSearchParams(e),a=await fetch(`${this.api_url}/onlinejudge/api/problem/get?${t.toString()}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.access_token}`}});if(!a.ok)throw new Error(`HTTP 錯誤：${a.status}`);const o=await a.json();this.problem=o.problem,this.description=o.problem.problem_description||"無法取得題目內容"}catch(e){this.error="無法取得題目敘述，請稍後再試",console.error(e)}finally{this.loading=!1}},async retryFetchDescription(){await new Promise((e=>setTimeout(e,1e3))),this.getTokenFromCookie(),this.fetchDescription()},initializeEditor(){const e=ht.Lz.theme({"&":{textAlign:"left"}}),t=ht.Lz.theme({"&":{border:"1px solid #ccc",borderRadius:"4px",padding:"4px"}}),a=ht.Lz.theme({"&.cm-editor.cm-focused":{outline:"none"},".cm-selectionMatch":{outline:"none"}}),o={doc:this.codeContent,extensions:[pt.oQ,(0,vt.Hg)(),e,t,a,ht.w4.of([mt.Yc])]},n=gt.$t.create({doc:o.doc,extensions:o.extensions});this.editor=new ht.Lz({state:n,parent:this.$refs.editorContainer})},changeLanguage(){if(this.editor){this.editor.destroy(),this.editor=null;const e=ht.Lz.theme({"&":{textAlign:"left"}}),t=ht.Lz.theme({"&":{border:"1px solid #ccc",borderRadius:"4px",padding:"4px"}}),a=ht.Lz.theme({"&.cm-editor.cm-focused":{outline:"none"},".cm-selectionMatch":{outline:"none"}}),o=[pt.oQ,e,t,a,ht.w4.of([mt.Yc])];"java"===this.language?o.push((0,kt.J)()):"python"===this.language?o.push((0,vt.Hg)()):"c"!==this.language&&"cpp"!==this.language||o.push((0,_t.I)());const n={doc:this.codeContent,extensions:o},i=gt.$t.create({doc:n.doc,extensions:n.extensions});this.editor=new ht.Lz({state:i,parent:this.$refs.editorContainer})}},async submitCode(){const e=this.editor.state.doc.toString();let t=this.language;"python"==t&&(t="py");const a=`${this.api_url}/judge/submit/`;try{let o={language:t,code:e,problemId:this.$route.query.problemId};console.log(o);const n=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.access_token}`},body:JSON.stringify(o)});if(!n.ok)throw new Error(`HTTP 錯誤：${n.status}`);const i=await n.json();console.log("提交成功",i),alert("提交成功"),this.$router.push({path:"/submission-history"})}catch(o){console.error("提交代碼時發生錯誤:",o)}}},mounted(){this.getTokenFromCookie(),console.log(this.$route.query.problemId),this.fetchDescription(),this.initializeEditor(),this.getTokenFromCookie()}};const ft=(0,d.A)(bt,[["render",dt],["__scopeId","data-v-2fd54d91"]]);var yt=ft;const Lt={class:"problem-list-container"},Ct={class:"back-div"},Pt={key:0,class:"title"},Et={class:"items-per-page",style:{margin:"20px 0px"}},wt={key:1,class:"loading"},Tt={key:2,class:"problem-list"},$t={key:0,class:"problem-item"},It={key:0,class:"delete-div"},Xt={class:"problem-number"},jt={class:"problem-title"},At={class:"problem-title"},xt={class:"problem-content"},Bt={key:0,class:"delete-div"},St=["onClick"],zt={class:"problem-number"},Ft={class:"problem-content"},Mt={class:"pagination"},qt=["onClick"],Ut={class:"new-comment"};function Dt(e,t,a,i,s,l){return(0,n.uX)(),(0,n.CE)("div",Lt,[(0,n.Lk)("div",Ct,[(0,n.Lk)("p",{class:"back-button",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))},"返回上一頁"),(0,n.Lk)("p",{class:"back-button",onClick:t[1]||(t[1]=(...e)=>l.goToProblem&&l.goToProblem(...e))},"前往題目")]),s.article?((0,n.uX)(),(0,n.CE)("h1",Pt,(0,m.v_)(s.article.title),1)):(0,n.Q3)("",!0),(0,n.Lk)("div",Et,[t[7]||(t[7]=(0,n.Lk)("label",{for:"perPage"},"每頁顯示數量:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",id:"perPage","onUpdate:modelValue":t[2]||(t[2]=e=>s.per_page=e),min:"1",onInput:t[3]||(t[3]=(...e)=>l.changeItemPerPage&&l.changeItemPerPage(...e)),placeholder:"輸入每頁顯示的資料筆數"},null,544),[[o.Jo,s.per_page]])]),s.loading?((0,n.uX)(),(0,n.CE)("div",wt,"載入中...")):((0,n.uX)(),(0,n.CE)("div",Tt,[s.article?((0,n.uX)(),(0,n.CE)("div",$t,[s.article.is_own?((0,n.uX)(),(0,n.CE)("div",It,[(0,n.Lk)("p",{class:"delete-button",onClick:t[4]||(t[4]=e=>l.deleteArticle(this.article.id))},"刪除文章")])):(0,n.Q3)("",!0),(0,n.Lk)("div",Xt,"作者: "+(0,m.v_)(s.article.author),1),(0,n.Lk)("div",jt,"題目: "+(0,m.v_)(s.article.problem_title),1),(0,n.Lk)("div",At,"標題: "+(0,m.v_)(s.article.title),1),(0,n.Lk)("div",xt,(0,m.v_)(s.article.content),1)])):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.comments,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"problem-item"},[e.is_own?((0,n.uX)(),(0,n.CE)("div",Bt,[(0,n.Lk)("p",{class:"delete-button",onClick:t=>l.deleteComment(e.id)},"刪除留言",8,St)])):(0,n.Q3)("",!0),(0,n.Lk)("div",zt,"作者: "+(0,m.v_)(e.author),1),(0,n.Lk)("div",Ft,(0,m.v_)(e.content),1)])))),128))])),(0,n.Lk)("div",Mt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.displayedPages,(e=>((0,n.uX)(),(0,n.CE)("button",{onClick:t=>l.changePage(e),class:(0,m.C4)(["btn",{active:s.currentPage===e}]),key:e},(0,m.v_)(e),11,qt)))),128))]),(0,n.Lk)("div",Ut,[t[8]||(t[8]=(0,n.Lk)("h2",null,"新增留言",-1)),(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.content=e),placeholder:"輸入內容",class:"textarea"},null,512),[[o.Jo,s.content]]),(0,n.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.submitComment&&l.submitComment(...e)),class:"submit-btn"},"發布")])])}var Jt={data(){return{comments:[],article:{},loading:!1,currentPage:1,total_page:0,per_page:10,content:""}},computed:{displayedPages(){const e=10;let t=Math.max(1,this.currentPage-Math.floor(e/2)),a=Math.min(this.totalPages,t+e-1);return a-t+1<e&&(t=Math.max(1,a-e+1)),Array.from({length:a-t+1},((e,a)=>t+a))},totalPages(){return this.total_page}},inject:["api_url","access_token"],methods:{goToProblem(){this.$router.push({path:"/problem",query:{problemId:this.article.problem_id}})},goBack(){this.$router.go(-1)},gotoArticleList(){this.$router.push({path:"/problem_article_list",query:{problemId:this.article.problem_id}})},async deleteArticle(e){try{const t=await fetch(`${this.api_url}/onlinejudge/article/${e}/delete/`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.access_token}`}}),a=await t.json();console.log(a),alert("文章刪除成功"),this.gotoArticleList()}catch(t){console.error("文章刪除失敗",t),alert("文章刪除失敗")}},async deleteComment(e){try{const t=await fetch(`${this.api_url}/onlinejudge/comment/${e}/delete/`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.access_token}`}}),a=await t.json();console.log(a),alert("刪除成功"),this.fetchArticles()}catch(t){console.error("留言刪除失敗",t),alert("留言刪除失敗")}},async submitComment(){if(this.content)try{let e={article_id:this.$route.query.articleId,content:this.content};const t=await fetch(`${this.api_url}/onlinejudge/comment/create/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.access_token}`},body:JSON.stringify(e)}),a=await t.json();console.log(a),alert("留言發佈成功！"),this.fetchArticles(),this.title="",this.content=""}catch(e){console.error("發佈失敗",e),alert("發佈失敗，請稍後再試")}else alert("內容不能為空")},changeItemPerPage(){this.total_page=0,this.changePage(1)},changePage(e){this.currentPage=e,this.fetchArticles()},async fetchArticles(){this.loading=!0;try{const e=new URLSearchParams({page:this.currentPage,per_page:this.per_page}),t=await fetch(`${this.api_url}/onlinejudge/article/${this.$route.query.articleId}/comments/?${e.toString()}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.access_token}`}}),a=await t.json();this.total_page=a.total_page,this.comments=a.comments,this.article=a.article}catch(e){console.error("獲取資料錯誤:",e)}finally{this.loading=!1}}},mounted(){this.fetchArticles()}};const Ot=(0,d.A)(Jt,[["render",Dt],["__scopeId","data-v-0dc20fe2"]]);var Rt=Ot;const Gt={class:"problem-list-container",style:{"min-height":"100vh"}},Kt={class:"back-div"},Ht={class:"items-per-page"},Qt={key:0,class:"loading"},Vt={key:1},Wt={class:"problem-grid"},Nt=["onClick"],Yt={class:"problem-title"},Zt={class:"problem-difficulty"},ea={class:"pagination"},ta=["onClick"],aa={class:"new-article"};function oa(e,t,a,i,s,l){return(0,n.uX)(),(0,n.CE)("div",Gt,[(0,n.Lk)("div",Kt,[(0,n.Lk)("p",{class:"back-button",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))},"返回上一頁")]),t[8]||(t[8]=(0,n.Lk)("h1",null,"討論區",-1)),(0,n.Lk)("div",Ht,[t[6]||(t[6]=(0,n.Lk)("label",{for:"perPage"},"每頁顯示數量:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",id:"perPage","onUpdate:modelValue":t[1]||(t[1]=e=>s.per_page=e),min:"1",onInput:t[2]||(t[2]=(...e)=>l.changeItemPerPage&&l.changeItemPerPage(...e)),placeholder:"輸入每頁顯示的資料筆數"},null,544),[[o.Jo,s.per_page]])]),s.loading?((0,n.uX)(),(0,n.CE)("div",Qt,"載入中...")):((0,n.uX)(),(0,n.CE)("div",Vt,[(0,n.Lk)("div",Wt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.articles,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"problem-item",onClick:t=>l.goToArticle(e.id)},[(0,n.Lk)("div",Yt,"主題: "+(0,m.v_)(e.title),1),(0,n.Lk)("div",Zt,"留言數: "+(0,m.v_)(e.comment_count),1)],8,Nt)))),128))])])),(0,n.Lk)("div",ea,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.displayedPages,(e=>((0,n.uX)(),(0,n.CE)("button",{onClick:t=>l.changePage(e),class:(0,m.C4)(["btn",{active:s.currentPage===e}]),key:e},(0,m.v_)(e),11,ta)))),128))]),(0,n.Lk)("div",aa,[t[7]||(t[7]=(0,n.Lk)("h2",null,"新增文章",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.title=e),type:"text",placeholder:"輸入標題",class:"input"},null,512),[[o.Jo,s.title]]),(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.content=e),placeholder:"輸入內容",class:"textarea"},null,512),[[o.Jo,s.content]]),(0,n.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>l.submitArticle&&l.submitArticle(...e)),class:"submit-btn"},"發布")])])}var na={data(){return{articles:[],loading:!1,currentPage:1,total_page:0,per_page:10,title:"",content:""}},computed:{displayedPages(){const e=10;let t=Math.max(1,this.currentPage-Math.floor(e/2)),a=Math.min(this.totalPages,t+e-1);a-t+1<e&&(t=Math.max(1,a-e+1));let o=[];for(let n=t;n<=a;n++)o.push(n);return o},totalPages(){return this.total_page}},inject:["api_url","access_token"],methods:{goBack(){this.$router.go(-1)},async submitArticle(){if(this.title&&this.content)try{let e={problem_id:this.$route.query.problemId,title:this.title,content:this.content};const t=await fetch(`${this.api_url}/onlinejudge/article/create/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.access_token}`},body:JSON.stringify(e)}),a=t.json();console.log(a),alert("文章發佈成功！"),this.fetchArticles(),this.title="",this.content=""}catch(e){console.error("發佈失敗",e),alert("發佈失敗，請稍後再試")}else alert("標題與內容不能為空")},changeItemPerPage(){this.total_page=0,this.changePage(1)},goToArticle(e){this.$router.push({path:"/forum/disscussion",query:{articleId:e}})},changePage(e){this.currentPage=e,this.fetchArticles()},async fetchArticles(){this.loading=!0;try{const e={page:this.currentPage,per_page:this.per_page},t=new URLSearchParams(e),a=await fetch(`${this.api_url}/onlinejudge/problem/${this.$route.query.problemId}/articles/?${t.toString()}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.access_token}`}}),o=await a.json();this.total_page!=o.total_page&&(this.total_page=o.total_page),this.articles=o.articles}catch(e){console.error("獲取題目資料錯誤:",e)}finally{this.loading=!1}}},mounted(){this.fetchArticles()}};const ia=(0,d.A)(na,[["render",oa],["__scopeId","data-v-1006c730"]]);var sa=ia;const la={class:"problem-list-container"},ra={class:"back-div"},ca={class:"items-per-page",style:{"margin-bottom":"20px"}},ua={key:0,class:"loading"},da={key:1},ha={class:"submission-grid"},pa=["onClick"],ga={class:"pagination"},ma=["onClick"];function ka(e,t,a,i,s,l){return(0,n.uX)(),(0,n.CE)("div",la,[(0,n.Lk)("div",ra,[(0,n.Lk)("p",{class:"back-button",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))},"返回上一頁")]),t[5]||(t[5]=(0,n.Lk)("h1",null,"提交紀錄",-1)),(0,n.Lk)("div",ca,[t[3]||(t[3]=(0,n.Lk)("label",{for:"perPage"},"每頁顯示數量:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",id:"perPage","onUpdate:modelValue":t[1]||(t[1]=e=>s.per_page=e),min:"1",onInput:t[2]||(t[2]=(...e)=>l.changeItemPerPage&&l.changeItemPerPage(...e)),placeholder:"輸入每頁顯示的資料筆數"},null,544),[[o.Jo,s.per_page]])]),s.loading?((0,n.uX)(),(0,n.CE)("div",ua,"載入中...")):((0,n.uX)(),(0,n.CE)("div",da,[(0,n.Lk)("div",ha,[t[4]||(t[4]=(0,n.Fv)('<div class="grid-header" data-v-bd8b8620>題號</div><div class="grid-header" data-v-bd8b8620>題目</div><div class="grid-header" data-v-bd8b8620>語言</div><div class="grid-header" data-v-bd8b8620>上傳時間</div><div class="grid-header" data-v-bd8b8620>上傳結果</div>',5)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.histories,(e=>((0,n.uX)(),(0,n.CE)(n.FK,{key:e.submission_id},[(0,n.Lk)("div",null,(0,m.v_)(e.problem_id),1),(0,n.Lk)("div",{onClick:t=>l.goToProblem(e.problem_id),class:"clickable"},(0,m.v_)(e.problem_title),9,pa),(0,n.Lk)("div",null,(0,m.v_)(e.language),1),(0,n.Lk)("div",null,(0,m.v_)(e.submit_time),1),(0,n.Lk)("div",{class:(0,m.C4)({success:"AC"===e.submit_result,failed:"AC"!==e.submit_result})},(0,m.v_)(e.submit_result),3)],64)))),128))])])),(0,n.Lk)("div",ga,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.displayedPages,(e=>((0,n.uX)(),(0,n.CE)("button",{onClick:t=>l.changePage(e),class:(0,m.C4)(["btn",{active:s.currentPage===e}]),key:e},(0,m.v_)(e),11,ma)))),128))])])}var va={data(){return{histories:[],loading:!1,currentPage:1,total_page:0,per_page:10}},computed:{displayedPages(){const e=10;let t=Math.max(1,this.currentPage-Math.floor(e/2)),a=Math.min(this.totalPages,t+e-1);return a-t+1<e&&(t=Math.max(1,a-e+1)),Array.from({length:a-t+1},((e,a)=>t+a))},totalPages(){return this.total_page}},inject:["api_url","access_token"],methods:{goToProblem(e){this.$router.push({path:"/problem",query:{problemId:e}})},goBack(){this.$router.go(-1)},changeItemPerPage(){this.total_page=0,this.changePage(1)},changePage(e){this.currentPage=e,this.fetchHistories()},async fetchHistories(){this.loading=!0;try{const e=new URLSearchParams({page:this.currentPage,per_page:this.per_page}),t=await fetch(`${this.api_url}/onlinejudge/submissions/?${e.toString()}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.access_token}`}}),a=await t.json();this.total_page=a.total_page,this.histories=a.data}catch(e){console.error("獲取資料錯誤:",e)}finally{this.loading=!1}}},mounted(){this.fetchHistories()}};const _a=(0,d.A)(va,[["render",ka],["__scopeId","data-v-bd8b8620"]]);var ba=_a;const fa=[{path:"/",name:"home",component:C},{path:"/submission-history",name:"submission-history",component:ba},{path:"/announcement",name:"announcement",component:B},{path:"/problem_article_list",name:"problem_article_plist",component:sa},{path:"/problem_list",name:"problem_list",component:te},{path:"/problem",name:"problem_page",component:yt},{path:"/forum",name:"forum",component:ve},{path:"/forum/disscussion",name:"disscussion",component:Rt},{path:"/rank",name:"rank",component:Ae},{path:"/profile",name:"profile",component:Ve},{path:"/login",name:"login",component:et}],ya=(0,g.aE)({history:(0,g.Bt)(),routes:fa});var La=ya;(0,o.Ef)(p).use(La).mount("#app")}},t={};function a(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,o,n,i){if(!o){var s=1/0;for(u=0;u<e.length;u++){o=e[u][0],n=e[u][1],i=e[u][2];for(var l=!0,r=0;r<o.length;r++)(!1&i||s>=i)&&Object.keys(a.O).every((function(e){return a.O[e](o[r])}))?o.splice(r--,1):(l=!1,i<s&&(s=i));if(l){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[o,n,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,i,s=o[0],l=o[1],r=o[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(r)var u=r(a)}for(t&&t(o);c<s.length;c++)i=s[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(u)},o=self["webpackChunkonline_judge_web"]=self["webpackChunkonline_judge_web"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],(function(){return a(2135)}));o=a.O(o)})();
//# sourceMappingURL=app.5c689483.js.map